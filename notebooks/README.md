# Exploratory Data Analysis (EDA): Аналитика персонала IBM

## Введение
Цель данного исследования — провести разведочный анализ данных (EDA) по HR-датасету IBM HR
Analytics Employee Attrition & Performance, который содержит информацию о сотрудниках компании:
возраст, доход, отдел, стаж, уровень образования, удовлетворённость и текучесть кадров (Attrition).

**Основные задачи анализа:**
1. Загрузить и изучить структуру данных
2. Проверить полноту (Completeness) и уникальность записей (Uniqueness)
3. Оценить наличие выбросов и аномалий
4. Проанализировать распределения признаков
5. Изучить корреляции и провести базовый feature engineering
6. Сделать аналитические выводы о целостности и структуре данных

## 1. Загрузка и первичный осмотр данных
**Код:**
```
df = pd.read_csv("/content/Аналитика персонала от IBM.csv")
df.info()
display(df.describe().T)
display(df.describe(include='object').T)
```
**Вывод:**
- Размер: 1470 строк × 35 столбцов
- Числовых признаков: 26
- Категориальных признаков: 9
- Пропущенные значения (NaN) — отсутствуют
- Типы данных определены корректно (int64 и object)
**Комментарий:**
Датасет структурирован и готов к анализу. Все поля читаются корректно, данные полные и чистые.

## 2. Оценка полноты данных (Completeness)
**Метод:**
```
missing_count = df.isnull().sum()
missing_percent = (missing_count / len(df)) * 100
```
**Результаты:**
| Признак     | Пропуски | %    |
| ----------- | -------- | ---- |
| Все колонки | 0        | 0.0% |

**Вывод:**
Полнота данных — 100% (Completeness = 1.0)
Датасет полностью заполнен, отсутствуют пропуски.

## 3. Оценка уникальности записей (Uniqueness)
**Метод:**
```
unique_ids = df['EmployeeNumber'].nunique()
uniqueness = unique_ids / len(df)
```
**Результаты:**
- Всего строк: 1470
- Уникальных EmployeeNumber: 1470
- Полных дубликатов: 0
- Uniqueness = 1.0000

**Вывод:**
Все записи уникальны, идентификатор сотрудников (EmployeeNumber) корректен.
Структура данных целостная и без дубликатов.

## 4. Оценка выбросов и аномалий
**Метод 1: IQR (Interquartile Range)**
```
outlier_df = pd.DataFrame.from_dict(outlier_ratios, orient='index', columns=['outlier_ratio'])
```
**ТОП-5 признаков с наибольшей долей выбросов:**
| Признак                 | Outlier Ratio |
| ----------------------- | ------------- |
| TrainingTimesLastYear   | 0.162         |
| PerformanceRating       | 0.154         |
| MonthlyIncome           | 0.078         |
| YearsSinceLastPromotion | 0.073         |
| YearsAtCompany          | 0.071         |

**Комментарий:**
Основные выбросы наблюдаются в показателях, связанных с обучением, зарплатой и стажем. Эти выбросы отражают реальную вариативность данных (например, редкие случаи высоких доходов или длительных периодов без повышения).

**Метод 2: Z-score**
| Признак                 | Z-outlier Ratio |
| ----------------------- | --------------- |
| YearsSinceLastPromotion | 0.029           |
| YearsAtCompany          | 0.017           |
| TotalWorkingYears       | 0.011           |

**Вывод:**
Средний уровень выбросов — 2–4%, что приемлемо для HR-данных.
Аномальные точки — сотрудники с экстремальными значениями стажа, опыта или премий.

## 5. Визуализация распределений и выбросов
**Распределения числовых признаков**
```
plot_numeric_grid(df, numeric_cols)
```
![](/images/Images01.png)

**Комментарий:**
- Большинство признаков имеют распределение, близкое к нормальному.
- MonthlyIncome и TotalWorkingYears — асимметричны (правый хвост).
- PerformanceRating, StandardHours, EmployeeCount — постоянные значения (низкая дисперсия).

**Boxplots (выбросы)**

![](/images/Images02.png)

**Комментарий:**
- Горизонтальные боксплоты визуализируют разброс признаков.
- Выбросы ярче выражены в MonthlyIncome, YearsAtCompany и TrainingTimesLastYear.

**Сравнение по целевому признаку Attrition**
```
sns.boxplot(x='Attrition', y='MonthlyIncome', data=df)
```

**Вывод:**
- Сотрудники, покинувшие компанию (Attrition = Yes), имеют ниже доход и меньший стаж.
- Это подтверждает гипотезу о связи мотивации и удержания персонала с зарплатой и опытом.

**Категориальные признаки**

Графики частот (countplot) показывают:
- Основной отдел — Research & Development (65%)
- Наиболее частая роль — Sales Executive
- Большинство сотрудников не работают сверхурочно (OverTime = No)
![](/images/Images03.png)
![](/images/Images04.png)
![](/images/Images05.png)

## 6. Корреляционный анализ
**Матрица корреляций (Pearson):**
```
sns.heatmap(corr, cmap='coolwarm')
```
ТОП-10 сильных связей:
| Пара признаков                        | Корреляция |
| ------------------------------------- | ---------- |
| MonthlyIncome ↔ JobLevel              | 0.95       |
| JobLevel ↔ TotalWorkingYears          | 0.78       |
| PercentSalaryHike ↔ PerformanceRating | 0.77       |
| YearsWithCurrManager ↔ YearsAtCompany | 0.77       |
| Age ↔ TotalWorkingYears               | 0.68       |

**Вывод:**
- Высокие связи между уровнем должности, стажем и доходом.
- Признаки, связанные со временем в компании, сильно коррелируют — возможна избыточность.
- Корреляция целевого признака с зарплатой и стажем — потенциальные факторы для прогнозирования текучести.

## 7. Feature Engineering
Добавлены новые признаки:
- Attrition_Flag: бинаризация целевого признака (Yes → 1, No → 0)
- ExperienceRatio: отношение опыта (TotalWorkingYears) к возрасту (Age)

**Комментарий:**
- Показатель ExperienceRatio помогает выявить сотрудников, начавших работать рано или поздно — может быть значимым фактором текучести.

# 8. Сохранение промежуточных результатов
```
os.makedirs('notebooks/output', exist_ok=True)
missing_df.to_csv('notebooks/output/missing_report.csv')
outlier_df.to_csv('notebooks/output/outlier_ratios.csv')
corr.to_csv('notebooks/output/correlation_matrix.csv')
```

## Заключение
**Оценка качества данных:**
| Метрика             | Значение | Комментарий                    |
| ------------------- | -------- | ------------------------------ |
| Completeness        | 1.00     | Данных не пропущено            |
| Uniqueness          | 1.00     | Все записи уникальны           |
| Outlier Ratio (avg) | ≈ 0.04   | 4% выбросов — в пределах нормы |
| Data Consistency    | высокая  | типы и структура корректны     |

**Общие выводы:**
- Датасет чистый, структурированный, с хорошим качеством данных
- Наблюдаются ожидаемые закономерности:
-- опыт и должность влияют на доход
-- высокая текучесть среди сотрудников с низким доходом и коротким стажем
- Выбросы не искажают общую структуру
- Корреляции логичны и подтверждают бизнес-гипотезы

**Рекомендации:**
- Можно использовать датасет для построения моделей прогнозирования Attrition
- Стоит учесть мультиколлинеарность признаков стажа и должности
